<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>FocusTube Settings</title>
<style>
:root {
--bg-color: #282c34;
--secondary-bg: #3a4049;
--border-color: #4a505c;
--text-color: #abb2bf;
--header-color: #e0e6f0;
--accent-color: #61afef;
--accent-color-hover: #529bdf;
--success-color: #98c379;
}
html {
background-color: var(--bg-color);
}
body {
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
padding: 1.5rem 2rem;
max-width: 700px;
margin: 2rem auto;
background-color: var(--bg-color);
color: var(--text-color);
}
h1, h2 {
border-bottom: 1px solid var(--border-color);
padding-bottom: 0.75rem;
margin-top: 2rem;
margin-bottom: 1.5rem;
color: var(--header-color);
font-weight: 500;
}
h1 {
margin-top: 0;
font-size: 1.8rem;
text-align: center;
}
h2 {
font-size: 1.3rem;
}
.chart-container {
background-color: var(--secondary-bg);
padding: 1.5rem;
border-radius: 8px;
margin: 2rem 0;
border: 1px solid var(--border-color);
}
.chart-wrapper {
position: relative;
height: 300px;
}
fieldset {
background-color: var(--secondary-bg);
border: 1px solid var(--border-color);
border-radius: 8px;
padding: 1rem 1.5rem 1.5rem;
margin-top: 1.5rem;
transition: opacity 0.3s ease;
}
fieldset:disabled {
opacity: 0.5;
}
fieldset legend {
font-weight: 600;
font-size: 1.1em;
padding: 0 0.5rem;
margin-left: -0.5rem;
color: var(--header-color);
}
fieldset legend label {
display: inline-flex;
align-items: center;
gap: 0.6rem;
}
#focus-controls > div, #cooldown-controls > div {
margin-bottom: 1.2rem;
}
#focus-days {
margin: 1.5rem 0;
display: flex;
flex-wrap: wrap;
gap: 0.5rem 1.5rem;
}
#focus-days span {
width: 100%;
margin-bottom: 0.5rem;
}
label {
cursor: pointer;
display: inline-flex;
align-items: center;
gap: 0.5rem;
}
input[type="checkbox"] {
cursor: pointer;
width: 1.1em;
height: 1.1em;
accent-color: var(--accent-color);
}
input[type="time"], input[type="number"] {
background-color: var(--bg-color);
color: var(--text-color);
border: 1px solid var(--border-color);
border-radius: 6px;
padding: 6px 8px;
margin: 0 1rem 0 0.5rem;
}
button {
background-color: var(--accent-color);
color: white;
border: none;
padding: 10px 20px;
border-radius: 6px;
cursor: pointer;
font-size: 1rem;
font-weight: 500;
transition: background-color 0.2s ease, transform 0.1s ease;
}
button:hover {
background-color: var(--accent-color-hover);
}
button:active {
transform: scale(0.98);
}
#saveStatus, #cooldownSaveStatus {
  margin-top: 10px;
  font-size: 0.9rem;
  height: 1em;
  transition: opacity 0.5s ease, color 0.3s ease;
  font-weight: 500;
}
.settings-group {
margin-top: 2rem;
}
.description, .setting-row small {
color: #888;
display: block;
margin-top: 0.25rem;
font-size: 0.9rem;
}
.setting-row {
display: flex;
align-items: center;
margin-bottom: 1.2rem;
flex-wrap: wrap;
}
.setting-row > label {
margin-right: 1rem;
}

/* --- New Lock Styles --- */
#sensitive-settings-wrapper {
    position: relative;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-top: 2rem;
    overflow: hidden;
    background-color: var(--secondary-bg);
}
#settings-lock-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: rgba(40, 44, 52, 0.95);
    color: #ffffff;
    z-index: 10;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 2rem;
    text-align: center;
}
#settings-lock-overlay h2 {
    border-bottom: none;
    margin-bottom: 0.5rem;
}
#unlock-settings-button {
    padding: 12px 24px;
    font-size: 1.1rem;
    max-width: 400px;
    margin-top: 1rem;
    transition: padding 0.2s ease-in-out, background-color 0.2s ease;
}
#unlock-settings-button.unlocking {
    padding: 20px 40px;
}
#unlock-instructions {
    margin-top: 1rem;
    color: #ffffff;
    line-height: 1.5;
}
#unlock-progress-container {
    width: 80%;
    max-width: 350px;
    height: 10px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 5px;
    margin-top: 1.5rem;
    overflow: hidden;
}
#unlock-progress-bar {
    width: 0%;
    height: 100%;
    background-color: var(--success-color);
    transition: width 0.05s linear;
}
#sensitive-settings-wrapper > fieldset {
    margin-top: 0;
    border-radius: 0;
    border-left: none;
    border-right: none;
    border-top: 1px solid var(--border-color);
    border-bottom: none;
}
#sensitive-settings-wrapper > fieldset:first-of-type {
    border-top: none;
}


/* --- Credits Section Styles --- */
.credits-section {
background-color: var(--secondary-bg);
border: 1px solid var(--border-color);
border-radius: 8px;
padding: 1rem 1.5rem 1.5rem;
}
.credits-section p {
margin: 0.5rem 0 1.5rem;
text-align: center;
}
.credits-section .links {
display: flex;
justify-content: center;
gap: 1rem;
flex-wrap: wrap;
}
.credits-section .credit-link {
background-color: var(--bg-color);
color: var(--text-bright, #e0e6f0);
text-decoration: none;
padding: 10px 20px;
border-radius: 6px;
font-size: 0.9rem;
font-weight: 500;
transition: background-color 0.2s ease, transform 0.1s ease;
border: 1px solid var(--border-color);
}
.credits-section .credit-link:hover {
background-color: #4b525e;
border-color: var(--accent-color);
}
.credits-section .credit-link:active {
transform: scale(0.98);
}
.version-info-text {
    text-align: center;
    margin-top: 1.5rem;
    margin-bottom: 0;
    font-size: 0.85rem;
    color: #888;
}

/* Timestamp for charts */
.last-updated {
    font-size: 0.8rem;
    color: #888;
    text-align: right;
    margin-top: 0.75rem;
    margin-right: 0.5rem;
    height: 1em;
}
</style>
</head>
<body>
<h1>FocusTube Settings</h1>

<div id="sensitive-settings-wrapper">
  <div id="settings-lock-overlay">
    <h2>Settings Locked</h2>
    <p id="unlock-instructions">To prevent impulsive changes, these settings are locked.<br>Click and hold the button below to unlock.</p>
    <button id="unlock-settings-button">Unlock Settings</button>
    <div id="unlock-progress-container" style="display: none;">
      <div id="unlock-progress-bar"></div>
    </div>
  </div>

  <fieldset id="general-settings-fieldset">
    <legend><strong>General Settings</strong></legend>
    <div class="setting-row">
        <label>
            <input type="checkbox" id="showComments">
            Show comments under videos
        </label>
    </div>
    <div class="setting-row" style="margin-top: 1rem;">
        <div>
          <label>
              <input type="checkbox" id="grayscaleEnabled">
              Enable Grayscale Mode
          </label>
          <small class="description" style="padding-left: 1.8em;">Makes the entire YouTube website black and white to reduce stimulation.</small>
        </div>
    </div>
  </fieldset>

  <fieldset id="focus-settings-fieldset">
    <legend>
      <label>
        <input type="checkbox" id="focusEnabled">
        <strong>Enable Focus Hours</strong>
      </label>
    </legend>
    <div id="focus-controls" style="display: none;">
      <p class="description">Block YouTube entirely during these scheduled times.</p>
      <div>
        <label for="focusStart">From:</label>
        <input type="time" id="focusStart" required>
        <label for="focusEnd">To:</label>
        <input type="time" id="focusEnd" required>
      </div>
      <div id="focus-days">
        <span>On these days:</span>
        <label><input type="checkbox" value="1"> Mon</label>
        <label><input type="checkbox" value="2"> Tue</label>
        <label><input type="checkbox" value="3"> Wed</label>
        <label><input type="checkbox" value="4"> Thu</label>
        <label><input type="checkbox" value="5"> Fri</label>
        <label><input type="checkbox" value="6"> Sat</label>
        <label><input type="checkbox" value="0"> Sun</label>
      </div>
      <button id="saveFocus">Save Focus Settings</button>
      <p id="saveStatus"></p>
    </div>
  </fieldset>

  <fieldset id="cooldown-settings-fieldset">
      <legend><strong>Session & Cooldown Settings</strong></legend>
      <div id="cooldown-controls">
          <p class="description">Customize the "unstoppable" session timer behavior.</p>
          <div class="setting-row">
              <label for="cooldownDuration">Cooldown duration:</label>
              <input type="number" id="cooldownDuration" min="1" step="1" style="width: 80px;"> minutes
          </div>
          <small>How long YouTube is blocked after a session timer ends.</small>
          
          <div class="setting-row" style="margin-top: 1.5rem;">
              <label for="cooldownClicks">Clicks to bypass cooldown:</label>
              <input type="number" id="cooldownClicks" min="1" step="1" style="width: 80px;"> clicks
          </div>
          <small>How many times you must click the "Yes" button to continue watching.</small>

          <div style="margin-top: 1.5rem;">
              <button id="saveCooldown">Save Cooldown Settings</button>
              <p id="cooldownSaveStatus"></p>
          </div>
      </div>
  </fieldset>
</div>

<fieldset id="theme-settings-fieldset">
  <legend><strong>Colour Theme</strong></legend>
  <div class="setting-row">
    <label><input type="radio" name="theme" value="dark"> Dark</label>
    <label style="margin-left:1.5rem;"><input type="radio" name="theme" value="light"> Light</label>
    <label style="margin-left:1.5rem;"><input type="radio" name="theme" value="dracula"> Dracula</label>
  </div>
</fieldset>

<div class="chart-container">
<h2>Daily watch-time (minutes)</h2>
<div class="chart-wrapper">
<canvas id="dailyChart"></canvas>
</div>
<p class="last-updated" id="daily-last-updated">Last updated: N/A</p>
</div>
<div class="chart-container">
<h2>Weekly watch-time (minutes)</h2>
<div class="chart-wrapper">
<canvas id="weeklyChart"></canvas>
</div>
<p class="last-updated" id="weekly-last-updated">Last updated: N/A</p>
</div>
<div class="settings-group credits-section">
  <h2>Credits & Support</h2>
  <p>
    FocusTube is a free and open-source project by <strong>Tito Nicola Drugman</strong>.
  </p>
  <div class="links">
    <a href="https://github.com/TitoNicolaDrugman" target="_blank" class="credit-link">GitHub</a>
    <a href="https://www.linkedin.com/in/titonicoladrugman/" target="_blank" class="credit-link">LinkedIn</a>
    <a href="mailto:drugmantito@gmail.com" class="credit-link">Contact</a>
    <a href="https://github.com/TitoNicolaDrugman/FocusTube/blob/main/PRIVACY_POLICY.md" target="_blank" class="credit-link">Privacy Policy</a>
    <a href="https://www.paypal.com/paypalme/TitoNDrugman" target="_blank" class="credit-link">Support the Project 🫶</a>
  </div>
  <p id="version-info" class="version-info-text"></p>
</div>
<script src="chart.umd.min.js"></script>
<script type="module" src="theme.js"></script>
<script type="module" src="options.js"></script>
</body>
</html>